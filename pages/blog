<div class="blog_body">
    <h1>Get the Look</h1>
    <div id="blog_content">
        <script id="blog_content_script" type="x-tmpl-mustache">
            {{html_body}}
        </script>
    </div>
</div>
<script>
$(document).ready(function() {
        
        function renderPageData(){
             renderPostListTemplate("#blog_content_script", "#blog_content", getPostList()[0])
            //renders the events list by referencing the template id and the html id
            //for where to place the rendered content. See mallmaverick.js for implementation
            console.log(getPostList())
            $('#loading').hide();
            $('#page_content').fadeIn('fast');
            
        }
        
        loadMallDataCached(renderPageData);
    });
    
    function renderPostListTemplate(blog_template, blog_block, post){

    var item_list = [];
    var item_rendered = [];
    var blog_template_html = $(blog_template).html();
    Mustache.parse(blog_template_html);   // optional, speeds up future uses

    $.each( post , function( key, val ) {
        item_list.push(val);
    });
    item_list.sort(function(a, b){
        if(a.publish_date > b.publish_date) return -1;
        if(a.publish_date < b.publish_date) return 1;
        return 0;
    });
    $.each( item_list , function( key, val ) {
            var blog_rendered = Mustache.render(blog_template_html,val);
            item_rendered.push(blog_rendered);
    });
    $(blog_block).html(item_rendered.join(''));
}
</script>    