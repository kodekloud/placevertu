<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-4 col-md-3" id="sidebar">
            <h1><a href="../events" data-i18n="nav.events"></a></h1>
            <center id="cal1" class="cal1">
                <div class="date" id="clndr"></div>
            </center>
        </div>
        <div class="col-xs-12 col-sm-8 col-md-9" id="right-content">
            <div class="events" id="events_details_id">
                <!-- START MUSTACHE TEMPLATE FOR EVENT ITEM-->
                <script id="event_details_template" type="x-tmpl-mustache">
                    <div class="event-details">
                        <div class="event-name">
                            <h3>{{ name }}</h3>
                        </div>
                        <div class="event-dates">
                            {{ start_date }} to {{ end_date }}
                        </div>
                        <div class="event-description">
                             {{{ rich_description }}}
                        </div>
                        <div class="social-links">
                            <span>
                                        <a class="facebook-share" href="http://www.facebook.com/sharer.php?u=http://placevertu.kodekloud.io/events/{{slug}}" target="_blank">
                                            <i class="fa fa-facebook-official"></i>
                                        </a>
                                    </span>
                                    <span>
                                        <a class="twitter-share" href="http://twitter.com/?status={{name}}%20%20http://placevertu.kodekloud.io/events/{{slug}}" target="_blank">
                                            <i class="fa fa-twitter-square"></i>
                                        </a>
                                    </span>
                        </div>
                        <div class="event-image">
                            <img src="{{event_image_url_abs}}">
                        </div>
                    </div>
                </script>
                <!-- END MUSTACHE TEMPLATE FOR EVENT ITEM-->
                    
            </div>
        </div>
       
    </div>
</div>

<script>

    $(document).ready(function() {
        
        function renderPageData(){
           //renders the events list by referencing the template id and the html id
            //for where to place the rendered content. See mallmaverick.js for implementation
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            var event_details = getEventDetailsBySlug(slug);
            checkErrorPage(event_details);
            renderEventDetailsTemplate('#event_details_template','#events_details_id',event_details);
        
            //please see http://kylestetz.github.io/CLNDR/
            $('#clndr').clndr({
                events:getEventsList(),
                  multiDayEvents: {
                    startDate: 'start_date',
                    endDate: 'end_date'
                  },
                  clickEvents: {
                    click: function(target) {
                      
                    },
                    onMonthChange: function(month) {
                      $('.clndr-previous-button').html("<");
                      $('.clndr-next-button').html(">");
                    }
                  },
                  doneRendering: function() {
                    
                  }
            });
            
            
            
            $('.clndr-previous-button').html("<");
            $('.clndr-next-button').html(">");
            $('#loading').hide();
            $('#page_content').fadeIn('fast');
            
            $(".facebook-share img").hover(
                function () {
                    $(this).attr("src","http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/49e992eb70ac82a631edbaaac81e520b/social_fb_selected.png");
                },
                function () {
                    $(this).attr("src","http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/b0569e51e18927ad105550396bfc8f3f/share_fb.png");
            });
            $(".twitter-share img").hover(
                function () {
                    $(this).attr("src","http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/49e992eb70ac82a631edbaaac81e520b/share_twit_selected.png");
                },
                function () {
                    $(this).attr("src","http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/b0569e51e18927ad105550396bfc8f3f/share_twit.png");
            });
            
            
             $.ajax({
                url : "/web_pages/update_dynamic_page_meta_data",
                type: "POST",
                data : {authenticity_token: '<%=form_authenticity_token%>' ,
                        web_page_id: '<%=web_page_id%>', path:window.location.pathname,
                        meta_lang:'EN',
                        meta_title:"Place Vertu | " + event_details.name,
                        meta_description: event_details.name + event_details.description,
                        //meta_img: promo_image_url,
                        meta_keywords:''
                        
                        
                },
                success: function(data, textStatus, jqXHR)
                {
                    
                },
                error: function (jqXHR, textStatus, errorThrown)
                {
                    
                }
            });
        }
        
        loadMallDataCached(renderPageData);
    });

</script>