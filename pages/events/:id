<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-4 col-md-3">
            <h1><a href="../events" data-i18n="nav.events"></a></h1>
            <center id="cal1" class="cal1">
                <div class="date" id="clndr"></div>
            </center>
        </div>
        <div class="col-xs-12 col-sm-8 col-md-9">
            <div class="events" id="events_details_id">
                <!-- START MUSTACHE TEMPLATE FOR EVENT ITEM-->
                <script id="event_details_template" type="x-tmpl-mustache">
                    <div class="event-details">
                        <div class="event-name">
                            <h3>{{ name }}</h3>
                        </div>
                        <div class="event-dates">
                            {{ start_date }} to {{ end_date }}
                        </div>
                        <div class="event-description">
                            {{ description }}
                        </div>
                        <div class="social-links">
                            <span><a href="http://www.facebook.com/sharer.php?u=http://placevertu.kodekloud.io/promotions/{{slug}}" target="_blank"><img src="http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/b0569e51e18927ad105550396bfc8f3f/share_fb.png"></a></span>
                            <span><a href="http://twitter.com/?status={{name}}%20%20http://placevertu.kodekloud.io/promotions/{{slug}}" target="_blank">
                                   <img src="http://kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/b0569e51e18927ad105550396bfc8f3f/share_twit.png">
                                   </a></span>
                        </div>
                        <div class="event-image">
                            <img src="{{event_image_url_abs}}">
                        </div>
                    </div>
                </script>
                <!-- END MUSTACHE TEMPLATE FOR EVENT ITEM-->
                    
            </div>
        </div>
       
    </div>
</div>

<script>

    $(document).ready(function() {
        
        function renderPageData(){
           //renders the events list by referencing the template id and the html id
            //for where to place the rendered content. See mallmaverick.js for implementation
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            var event_details = getEventDetailsBySlug(slug);
            checkErrorPage(event_details);
            renderEventDetailsTemplate('#event_details_template','#events_details_id',event_details);
        
            //please see http://kylestetz.github.io/CLNDR/
            $('#clndr').clndr({
                events:getEventsList(),
                  multiDayEvents: {
                    startDate: 'start_date',
                    endDate: 'end_date'
                  },
                  clickEvents: {
                    click: function(target) {
                      
                    },
                    onMonthChange: function(month) {
                      $('.clndr-previous-button').html("<");
                      $('.clndr-next-button').html(">");
                    }
                  },
                  doneRendering: function() {
                    
                  }
            });
            
            $('.clndr-previous-button').html("<");
            $('.clndr-next-button').html(">");
            $('#loading').hide();
            $('#page_content').fadeIn('fast');
        }
        
        loadMallData(renderPageData);
    });

</script>